{% extends "base.html" %}
{% block content %}
<div class="card mb-4">
<div class="card-header">
    <h5>Tasks You Created</h5>
  </div>
  <div class="card-body">
    {% if completed_tasks %}
    <table class="table align-items-center mb-0">
      <thead>
        <tr>
          <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Job Description</th>
          <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Assigned By</th>
          <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Due Date</th>
          <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Completed Date</th>
        </tr>
      </thead>
      <tbody>
        {% for job in completed_tasks %}
        <tr>
          <td>
            <div class="d-flex px-2 py-1">
              <div class="d-flex flex-column justify-content-center">
                <span class="text-xs font-weight-bold">{{ job.description }}</span>
              </div>
            </div>
          </td>
          <td class="align-middle text-center text-sm">
            <span class="text-xs font-weight-bold"></span>
          </td>
          <td class="align-middle text-center text-sm">
            <span class="text-xs font-weight-bold">{{ job.date_assigned|date:"d M Y" }}</span>
          </td>
          <td class="align-middle text-center text-sm">
            <span class="text-xs font-weight-bold">{{ job.due_date|date:"d M Y" }}</span>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p>No completed jobs assigned.</p>
    {% endif %}
  </div>
</div>
</div>


<div class="card mb-4">
    <div class="card-header">
      <h5>Tasks You Reassigned</h5>
    </div>
    <div class="card-body">
      {% if reassigned_tasks %}
      <table class="table align-items-center mb-0">
        <thead>
          <tr>
            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Job Description</th>
            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Reassigned By</th>
            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Assigned Date</th>
            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Reassigned On</th>
          </tr>
        </thead>
        <tbody>
          {% for reassignment in reassigned_tasks %}
          {% for job in reassigned_tasks %}
          <tr>
            <td>{{ job.description }}</td>
            <td>{{ job.assigned_by.user.get_full_name|default:job.assigned_by.user.username }}</td>
            <td>{{ job.due_date|date:"d M Y" }}</td>
          </tr>
          {% endfor %}
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No reassigned tasks.</p>
      {% endif %}
    </div>
  </div>
  
{% endblock %}
